# JOHNSON COUNTER
A Johnson counter is a modified ring counter in which the output from the last flip flop is inverted and fed back as an input to the first. It is also called as Inverse Feedback COunter or Twisted Ring Counter. It is used in hardware logic design to create complicated Finite States Machine (FSM) eg: ASIC and FPGA design. It roughly consumes 80-100 mW of power and runs at a clock frequency of 36 MHz.

## BLOCK DIAGRAM OF JOHNSON'S COUNTER

![image](https://github.com/Shubhashree359/johnson_counter/assets/142501263/d5d4184f-0c81-493c-84ea-02a67d95613b)

## aplication of johnson counter
 * Used as a synchronous decade counter or divider circuit.
 * 3 stage Johnson counter is used as a 3 phase square wave generator with 1200 phase shift.

## required tools
 * iverilog -> Icarus Verilog is an open source Verilog compiler that supports the IEEE-1364 Verilog HDL including IEEE1364-2005 plus extensions.
 * Yosys -> Yosys is a framework for Verilog RTL synthesis. It currently has extensive Verilog-2005 support and provides a basic set of synthesis algorithms for various application domains.
 * Gtkwave -> GTKWave is a fully featured GTK+ based wave viewer for Unix and Win32 which reads LXT, LXT2, VZT, FST, and GHW files as well as standard Verilog VCD/EVCD files and allows their viewing.

## FUNCTIONAL SIMULATION

#### About iverilog and gtkwave
Icarus Verilog is an implementation of the Verilog hardware description language.
GTKWave is a fully featured GTK+ v1. 2 based wave viewer for Unix and Win32 which reads Ver Structural Verilog Compiler generated AET files as well as standard Verilog VCD/EVCD files and allows their viewing.

#### Installing iverilog and gtkwave in Ubuntu
Open your terminal and type the following to install iverilog and GTKWave

    $   sudo apt get update
    $   sudo apt get install iverilog gtkwave

* To clone the repository and download the netlist files for simulation , enter the following commands in your terminal.

      $   git clone https://github.com/Shubhashree359/johnson_counter.git
      $   cd johnson_counter

* To simulate and run the verilog code , enter the following commands in your terminal.

      $   iverilog pes_johnson_counter.v pes_johnson_counter_tb.v -o pes_johnson_counter
      $   ./pes_johnson_counter
    
* To see the output waveform in gtkwave, enter the following commands in your terminal.

      $   gtkwave pes_johnson_counter.vcd

#### The output waveform

![image](https://github.com/Shubhashree359/johnson_counter/assets/142501263/41bf9287-56a0-4ad7-bc33-625a65a796cc)

## Synthesis
Synthesis transforms the simple RTL design into a gate-level netlist with all the constraints as specified by the designer. In simple language, Synthesis is a process that converts the abstract form of design to a properly implemented chip in terms of logic gates.

Synthesis takes place in multiple steps:

 * Converting RTL into simple logic gates.
 * Mapping those gates to actual technology-dependent logic gates available in the technology libraries.
 * Optimizing the mapped netlist keeping the constraints set by the designer intact.

#### GLS(gate level synthesis)
 While performing GLS(gate level synthesis) we use skywater 130 nm technology library files to import the cells from the library. Using those cells we then generate the netlist which would be a new .v file generated by write_verilog command. With this file and the testbench we generated for the RTL simulation we would again get a new waveform for this GLS netlist. This waveform should match with our initial waveform, infact waveforms if every stages of the flow should match the initial design waveform.

### Yosys Synthesizer:
It is a tool we use to convert out RTL design code to netlist. Yosys is the tool I've used in this project.

The commands to get the yosys is given below:

 * Go to the directory where verilog file is present and open terminal
 * invoke Yosys

Now you need to create a yosys_run.sh file , which is the yosys script file used to run the synthesis. The contents of the yosys_run file are given below:

    yosys>read_liberty -lib /home/vsd/VLSI/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
    yosys>read_verilog pes_johnson_counter.v
    yosys>synth -top pes_johnson_counter

![image](https://github.com/Shubhashree359/johnson_counter/assets/142501263/5a035cb7-741a-4e97-a466-a10a07890fb1)

    yosys>abc -liberty /home/vsd/VLSI/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib

![image](https://github.com/Shubhashree359/johnson_counter/assets/142501263/1758fe61-7113-40c5-ae03-9344466d223d)

    yosys>flatten
    yosys> show
    yosys> write_verilog -noattr pes_linearfsr_net.v

  ![image](https://github.com/Shubhashree359/johnson_counter/assets/142501263/55ec160c-4146-4c94-afc2-9d221474853c)

 #### * invoke GLS

    iverilog /home/vsd/VLSI/sky130RTLDesignAndSynthesisWorkshop/my_lib/verilog_model/primitives.v /home/vsd/VLSI/sky130RTLDesignAndSynthesisWorkshop/my_lib/verilog_model/sky130_fd_sc_hd.v pes_pwm_gen_netlist.v pes_pwm_gen.v
    ./a.out
    gtkwave pes_linearfsr_tb.vcd

![image](https://github.com/Shubhashree359/johnson_counter/assets/142501263/5c35faa1-d30a-464b-8517-af505539098e)

![image](https://github.com/Shubhashree359/johnson_counter/assets/142501263/4c3255f1-7bb4-4064-968a-2d2dafed3c96)







    










